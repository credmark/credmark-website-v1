{"pageProps":{"post":{"author":" Neil Zumwalde","content":[{"_key":"6bf49f0683ac","_type":"block","children":[{"_key":"ae5ebdac22ed","_type":"span","marks":["strong"],"text":"Uniswap"},{"_key":"0786b7b210a9","_type":"span","marks":[],"text":" is one of the most popular Decentralized Exchanges in DeFi. Its popularity is due to a user’s ability to earn yield as a Liquidity Provider (LPs). LPs earn transaction fees as other users swap one crypto for another, but like any financial tool using Uniswap comes with a unique set of risks."}],"markDefs":[],"style":"normal"},{"_key":"fb262dca05a6","_type":"block","children":[{"_key":"f3680e95d4500","_type":"span","marks":[],"text":"Uniswap recently upgraded from v2 to v3 and is encouraging users to migrate liquidity from the older protocol to the newer one. The protocols are different, so naturally their risk profiles are different too. Let’s examine the risks and rewards of using each version of Uniswap."}],"markDefs":[],"style":"normal"},{"_key":"534d2e1e121e","_type":"block","children":[{"_key":"6981ac771984","_type":"span","marks":[],"text":"RISK IN UNISWAP V2"}],"markDefs":[],"style":"h2"},{"_key":"e85415f99e20","_type":"block","children":[{"_key":"ede19bd1dda8","_type":"span","marks":[],"text":"In Uniswap v2, the biggest risk to a liquidity provider is impermanent loss."}],"markDefs":[],"style":"normal"},{"_key":"d2365408f8f5","_type":"block","children":[{"_key":"1ae854ccd7640","_type":"span","marks":[],"text":"If one of the tokens in a pair — let’s call it Token A — performed well compared to Token B, the liquidity provider would end up with less total value than if they’d just held the same amount of Token A outside of Uniswap. This is because uniswap attempts to balance the overall value of the pair you’re supplying as 50/50 value between the two."}],"markDefs":[],"style":"normal"},{"_key":"05db0091e4bd","_type":"block","children":[{"_key":"843015b1ed80","_type":"span","marks":[],"text":"AN EXAMPLE"}],"markDefs":[],"style":"h3"},{"_key":"718bf2348edb","_type":"block","children":[{"_key":"4901437cdda9","_type":"span","marks":[],"text":"Lets look at an example between two investors — Alice and Bob."}],"markDefs":[],"style":"normal"},{"_key":"3abb22300cf7","_type":"block","children":[{"_key":"5a1741e53e710","_type":"span","marks":[],"text":"Alice has $500 of ETH (Ethereum) and $500 of USDC, a popular stablecoin. She doesn’t do anything with them."}],"markDefs":[],"style":"normal"},{"_key":"f484a34c1ab6","_type":"block","children":[{"_key":"1be4c58c5d9d0","_type":"span","marks":[],"text":"Bob has $500 in ETH and $500 in USDC. He pairs them together and puts them into a Uniswap v2 pool."}],"markDefs":[],"style":"normal"},{"_key":"5620289ebb80","_type":"block","children":[{"_key":"550cc0878d0e0","_type":"span","marks":[],"text":"Let’s see what happens if the price of ETH doubles."}],"markDefs":[],"style":"normal"},{"_key":"1d5ff94bd324","_type":"image","asset":{"_ref":"image-928f3e720af6f3df21ada70ab99096b01f1631f8-1137x684-jpg","_type":"reference"}},{"_key":"50c83d56bc9c","_type":"block","children":[{"_key":"3b9619d9ac92","_type":"span","marks":[],"text":"If ETH doubles, Alice will suffer an opportunity cost called impermanent loss. Impermanent loss happens when the relative price between the two assets changes away from the initial position."}],"markDefs":[],"style":"normal"},{"_key":"e9dc7cbbe839","_type":"block","children":[{"_key":"07434d8641ca0","_type":"span","marks":[],"text":"In Uniswap v2, if the price of one asset doubles or halves, impermanent loss goes to 5.72%, as shown in the chart above."}],"markDefs":[],"style":"normal"},{"_key":"4f4535a3509a","_type":"block","children":[{"_key":"75d4286d0de90","_type":"span","marks":[],"text":"After ETH doubles, Bob would end up with a 50/50 stake worth $1,414 + fees — his initial $1500 would lose 5.72%."}],"markDefs":[],"style":"normal"},{"_key":"e0d95f4367e8","_type":"block","children":[{"_key":"2b65ee0f52990","_type":"span","marks":[],"text":"Alice ends up with $1000 of ETH and $500 of USDC. Her stake is worth $1,500, but she hasn’t collected any fees."}],"markDefs":[],"style":"normal"},{"_key":"c27c78473c90","_type":"block","children":[{"_key":"ff0f033edd220","_type":"span","marks":[],"text":"In order for Bob’s stake to match Alice’s, he needs to generate $86 of fees. If he waits several months, this is likely to happen. Historically, fee generation on popular Uniswap pools have fluctuated between 10% and 40% of your initial investment."}],"markDefs":[],"style":"normal"},{"_key":"e24093091944","_type":"block","children":[{"_key":"8d48102f7c6b0","_type":"span","marks":[],"text":"Now, let’s see what happens if the price of ETH halves."}],"markDefs":[],"style":"normal"},{"_key":"66a566c44c47","_type":"block","children":[{"_key":"7bc10661b0c70","_type":"span","marks":[],"text":"Bob’s pool drops in value to 707$ + fees, probably mostly generated in ETH, since more ETH had to have been sold than bought in order for the price to drop."}],"markDefs":[],"style":"normal"},{"_key":"99fa56c5af6c","_type":"block","children":[{"_key":"8ef833c925c80","_type":"span","marks":[],"text":"Alice is holding $750: 500 USDC and $250 of ETH."}],"markDefs":[],"style":"normal"},{"_key":"a8c5e6d50ff4","_type":"image","asset":{"_ref":"image-850468bdaab3a5f020fe075eccb5c167dcd62d18-1596x486-png","_type":"reference"}},{"_key":"9ea1006d08a3","_type":"block","children":[{"_key":"569aedc62a3a","_type":"span","marks":[],"text":"Uniswap v3 has introduced a new concept: "},{"_key":"ff9ba4fa7d36","_type":"span","marks":["strong"],"text":"concentrated liquidity pools."}],"markDefs":[],"style":"normal"},{"_key":"59fa7649bd52","_type":"block","children":[{"_key":"ef6a92a6664f0","_type":"span","marks":[],"text":"A concentrated liquidity pool allows a user to create price ranges they are willing to sell their assets in. The price range is correlation between the two assets. For example, if you set a price range from to 10% to -10%, your pool position would generate profits (from fees) as long as the value difference between the two assets doesn’t exceed a 10% gain or loss. If you set your price range smaller — say 5% to -5%, you will earn a larger share of the fees within the price range, but the chance of your position going out of this range is a lot higher — causing impermanent loss."}],"markDefs":[],"style":"normal"},{"_key":"d4970d6c5ab7","_type":"block","children":[{"_key":"f6b80035c06a0","_type":"span","marks":[],"text":"If the prices move beyond the edge of the set price range, the user’s pool only contains the less valuable token and no longer generates fees. The pool and fees return to normal when prices re-enter the set price range. The narrower the range, the higher the percentage of fees paid to the user."}],"markDefs":[],"style":"normal"},{"_key":"b39039e0f9af","_type":"block","children":[{"_key":"d9e3a0a354360","_type":"span","marks":[],"text":"In short, the tradeoff is with narrower range, the pool is more susceptible to impermanent loss, but generates higher fees. With a wide range, you can avoid impermanent loss, while accepting a lower fee amount."}],"markDefs":[],"style":"normal"},{"_key":"4eed48c02cc3","_type":"block","children":[{"_key":"ef73d13e328b","_type":"span","marks":[],"text":"AN EXAMPLE"}],"markDefs":[],"style":"h3"},{"_key":"3cd54b2950ed","_type":"block","children":[{"_key":"c88860dadb7c","_type":"span","marks":[],"text":"Remember that Alice keeps her money in her wallet. Chris and David join Alice & Bob and create pools in Uniswap v3. They all choose different price ranges, which has an impact on the outcome of their investment."}],"markDefs":[],"style":"normal"},{"_key":"09a82b5f2bb6","_type":"block","children":[{"_key":"22d0ae2224ed0","_type":"span","marks":[],"text":"Bob has set a range of +100% to -50% (+/- 2x or a total of a 4x range)."}],"markDefs":[],"style":"normal"},{"_key":"cb78a2f72a68","_type":"block","children":[{"_key":"2a17da9c257a0","_type":"span","marks":[],"text":"Chris has set a range of +1000% to -90% (+/-10x)."}],"markDefs":[],"style":"normal"},{"_key":"043af428390e","_type":"block","children":[{"_key":"9104b6f223950","_type":"span","marks":[],"text":"David has set a range of +10% to -10%."}],"markDefs":[],"style":"normal"},{"_key":"2fc05ded3879","_type":"image","asset":{"_ref":"image-71877e7c73f99bb4d00412ef3f940902ee4c7156-947x244-png","_type":"reference"}},{"_key":"17eadf53b2e5","_type":"block","children":[{"_key":"85dc8fa0649f","_type":"span","marks":[],"text":"If ETH doubles, this where our friends end up (based on experimental Testnet Data):"}],"markDefs":[],"style":"normal"},{"_key":"f5b76995bdc2","_type":"block","children":[{"_key":"f3be252388540","_type":"span","marks":[],"text":"Bob has collected 2.35x the fees of Chris and David has collected 14.6x the amount of fees of Chris."}],"markDefs":[],"style":"normal"},{"_key":"9724b5bb6eb9","_type":"block","children":[{"_key":"a915fa51348c0","_type":"span","marks":[],"text":"The average fees generated per year per dollar on the USDC/ETH pool are 49% (for the first week of July 2021). So if Bob’s width was the average geometric width of all the USDC/ETH LPs, Bob is generating 49% return in fees. If this ETH doubling took a whole year, here are the numbers:"}],"markDefs":[],"style":"normal"},{"_key":"364283396889","_type":"image","asset":{"_ref":"image-000d1cab1b3df1c581530657a90d1f4ad13fcc3d-862x626-png","_type":"reference"}},{"_key":"b50712acd526","_type":"block","children":[{"_key":"85492fee7391","_type":"span","marks":[],"text":""}],"markDefs":[],"style":"normal"},{"_key":"bf882cfba7e6","_type":"block","children":[{"_key":"ca8da33496aa0","_type":"span","marks":[],"text":"Alice has $1,500 ($1,000 of ETH and $500 of USDC) and no fees … Way to hodl Alice 😴"}],"level":1,"listItem":"bullet","markDefs":[],"style":"normal"},{"_key":"176899535d09","_type":"block","children":[{"_key":"b86460bf78250","_type":"span","marks":[],"text":"Bob has $1,210 of USDC plus $592 in fees."}],"level":1,"listItem":"bullet","markDefs":[],"style":"normal"},{"_key":"a010c6ede3b1","_type":"block","children":[{"_key":"ec70c8967d240","_type":"span","marks":[],"text":"Chris has $1,374 ($544 of ETH and $829 of USDC) plus $286 in fees."}],"level":1,"listItem":"bullet","markDefs":[],"style":"normal"},{"_key":"51627f9540ce","_type":"block","children":[{"_key":"7766cef771780","_type":"span","marks":[],"text":"David has $1080 of USDC plus $328 in fees."}],"level":1,"listItem":"bullet","markDefs":[],"style":"normal"},{"_key":"0ca44d3ca6fd","_type":"block","children":[{"_key":"6447dd82c3ee","_type":"span","marks":[],"text":"You might be saying:"}],"markDefs":[],"style":"normal"},{"_key":"4de83afe0847","_type":"block","children":[{"_key":"c516fe2110fd0","_type":"span","marks":["em"],"text":"“Hey wait a second, David was pulling in 14.6x Chris’s fees! Why isn’t his pool worth more?”"}],"markDefs":[],"style":"normal"},{"_key":"ada9afb45f7a","_type":"block","children":[{"_key":"f6dc6ddce9bc0","_type":"span","marks":[],"text":"Assuming ETH rises steadily over the year, David’s position went out of range 10% of the way into the year, so his potential earnings of 304% of his investment ended up being ~30%, plus he got hit with the impermanent loss."}],"markDefs":[],"style":"normal"},{"_key":"cf327f97d4e9","_type":"block","children":[{"_key":"9c84bc5070140","_type":"span","marks":[],"text":"Several factors affect potential user returns:"}],"markDefs":[],"style":"normal"},{"_key":"f516eed8ab76","_type":"block","children":[{"_key":"8532928323a40","_type":"span","marks":[],"text":"the concentration and ranges of the provided liquidity,"}],"level":1,"listItem":"bullet","markDefs":[],"style":"normal"},{"_key":"40c6fe88784f","_type":"block","children":[{"_key":"7dbdefbbcc9a0","_type":"span","marks":[],"text":"the pool’s fee amount,"}],"level":1,"listItem":"bullet","markDefs":[],"style":"normal"},{"_key":"fc4f58d0c45a","_type":"block","children":[{"_key":"a9d1eb36733d0","_type":"span","marks":[],"text":"the pool volume, and"}],"level":1,"listItem":"bullet","markDefs":[],"style":"normal"},{"_key":"10f58682e7ad","_type":"block","children":[{"_key":"48786698c3190","_type":"span","marks":[],"text":"the price movement of the assets compared to each other."}],"level":1,"listItem":"bullet","markDefs":[],"style":"normal"},{"_key":"5c34da6ca449","_type":"block","children":[{"_key":"5a068197c6a8","_type":"span","marks":[],"text":"CREDMARK IS COMING TO HELP"}],"markDefs":[],"style":"h3"},{"_key":"199d7c689683","_type":"block","children":[{"_key":"b3956598eb00","_type":"span","marks":[],"text":"\nIf we break each of these down, we end up with a lot of things to consider. Understanding the relationship between these variables and their correlation to ultimate outcomes is very difficult. The average DeFi user doesn’t have the mathematical models necessary to choose parameters that create a position in line with the risk she is willing to take."}],"markDefs":[],"style":"normal"},{"_key":"8e53eb26a3dd","_type":"block","children":[{"_key":"7fdf129dcb7c0","_type":"span","marks":[],"text":"Credmark will be releasing an app on "},{"_key":"7fdf129dcb7c1","_type":"span","marks":["strong"],"text":"July 19th"},{"_key":"7fdf129dcb7c2","_type":"span","marks":[],"text":" that addresses this very problem."}],"markDefs":[],"style":"normal"},{"_key":"f981d4d22366","_type":"block","children":[{"_key":"e44cb7b1c8790","_type":"span","marks":[],"text":"The tool automatically chooses parameters based on the "},{"_key":"e44cb7b1c8791","_type":"span","marks":["em"],"text":"assets"},{"_key":"e44cb7b1c8792","_type":"span","marks":[],"text":" the user wants to use and the amount of risk the user is willing to tolerate."}],"markDefs":[],"style":"normal"},{"_key":"665361873dbd","_type":"block","children":[{"_key":"e54fb901db750","_type":"span","marks":[],"text":"In the future, the tool will allow users to rebalance their position when prices fall outside of the range originally set."}],"markDefs":[],"style":"normal"},{"_key":"7bab912a0500","_type":"block","children":[{"_key":"3000577ddded0","_type":"span","marks":[],"text":"Retail investors in Uniswap v3 will finally be able to manage their risk the way institutional investors do today."}],"markDefs":[],"style":"normal"},{"_key":"bcb0752d1e3c","_type":"block","children":[{"_key":"2bd2655dc49b0","_type":"span","marks":[],"text":"All DeFi protocols have a certain amount of risk associated with them, Uniswap is no different."}],"markDefs":[],"style":"normal"},{"_key":"5116c7eb24fa","_type":"block","children":[{"_key":"8995ed109a260","_type":"span","marks":[],"text":"Decentralize Everything. ✊🏻"}],"markDefs":[],"style":"normal"}],"date":"2021-07-13T21:28:00.000Z","mainImage":"https://cdn.sanity.io/images/9y1au457/production/dd728112ceda98dfb64e8a9f9ad6879c270d97de-346x276.png","slug":"managing-risk-and-making-money-in-uniswap","subtitle":null,"title":"MANAGING RISK AND MAKING MONEY IN UNISWAP"}},"__N_SSG":true}